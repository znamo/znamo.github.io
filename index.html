<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Igramo se s tablicama</title>

    <!-- Bootstrap -->
    <!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous
	
	<!-- Jquery Mobile --->
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    
	<div class="container">
	
	
	<h1>Tablica 1</h1>
		<div class="row hidden-xs">
			<table class="table table-striped table-bordered table-hover table-condensed">
			<thead>
				<tr data-bind="foreach: tablica.headers">
				  <td data-bind="text: $data"></td>		  
				</tr>
			</thead>
			<tbody data-bind="foreach: tablica.data">
				<tr>
				  <td data-bind="text:Ime"></td>
				  <td data-bind="text:Prezime"></td>
				  <td data-bind="text:Kampanja"></td>
				  <td data-bind="text:Cijena"></td>
				  <td data-bind="text:Datum"></td>
				  <td data-bind="text:Kontakt"></td>
				  <td><a data-bind="attr : {href: 'tra.html', title:'Naslov'}, text:'Ucini konakta'"></a></td>
				</tr>		
			</tbody>
			</table>
		</div>
		
		<div class="row visible-xs-block" id="malaLista">
			<div data-bind="html: nedirajtemikrugove"></div>
			<table class="table table-striped table-bordered table-hover table-condensed">
			<tbody data-bind="with: tablica.data()[tablica.page()]">
				<tr><td data-bind="text:tablica.headers()[0]"></td><td data-bind="text:Ime"></td></tr>		
				<tr><td data-bind="text:tablica.headers()[1]"></td><td data-bind="text:Prezime"></td></tr>	
				<tr><td data-bind="text:tablica.headers()[2]"></td><td data-bind="text:Kampanja"></td></tr>	
				<tr><td data-bind="text:tablica.headers()[3]"></td><td data-bind="text:Cijena"></td></tr>	
				<tr><td data-bind="text:tablica.headers()[4]"></td><td data-bind="text:Datum"></td></tr>	
				<tr><td data-bind="text:tablica.headers()[5]"></td><td data-bind="text:Kontakt"></td></tr>	
				<tr><td data-bind="text:tablica.headers()[6]"></td><td><a data-bind="attr : {href: 'tra.html', title:'Naslov'}, text:'Ucini konakta'"></a></td></tr>	
				</tr>		
			</tbody>
			</table>
		</div>
		
		
		<hr>
		
		
		<h1>Tablica 2</h1>
		<div class="row">
		
			<div data-bind="html: nedirajtemikrugove2" class="visible-xs-block"></div>
			<table class="table table-striped table-bordered table-hover table-condensed" id="table2">
			<thead>
				<tr>
				  <td data-bind="css:{'hidden-xs' : hidenOrNot(0)}">Ime</td>	  
				  <td data-bind="css:{'hidden-xs' : hidenOrNot(1)}">Prezime</td>
				  <td data-bind="css:{'hidden-xs' : hidenOrNot(2)}">Kampanja</td>
				  <td data-bind="css:{'hidden-xs' : hidenOrNot(3)}">Cijena</td>
				  <td data-bind="css:{'hidden-xs' : hidenOrNot(4)}">Datum</td>
				  <td data-bind="css:{'hidden-xs' : hidenOrNot(5)}">Br. Kontakata</td>
				  <td data-bind="css:{'hidden-xs' : hidenOrNot(6)}">Ucini kontakt</td>
				</tr>
			</thead>
			<tbody data-bind="foreach: tablica.data">
				<tr>
				  <td data-bind="text:Ime, css:{'hidden-xs' : hidenOrNot(0)}"></td>
				  <td data-bind="text:Prezime, css:{'hidden-xs' : hidenOrNot(1)}"></td>
				  <td data-bind="text:Kampanja, css:{'hidden-xs' : hidenOrNot(2)}"></td>
				  <td data-bind="text:Cijena, css:{'hidden-xs' : hidenOrNot(3)}"></td>
				  <td data-bind="text:Datum, css:{'hidden-xs' : hidenOrNot(4)}"></td>
				  <td data-bind="text:Kontakt,  css:{'hidden-xs' : hidenOrNot(5)}"></td>
				  <td data-bind="css:{'hidden-xs' : hidenOrNot(6)}"><a data-bind="attr : {href: 'tra.html', title:'Naslov'}, text:'Ucini konakta'"></a></td>
				</tr>		
			</tbody>
			</table>
		</div>
		
		
		
	</div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
	
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	
	<!-- knockout/knockout-3 --->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>
	
	<script>
	
function swipedetect(el, callback){
  
    var touchsurface = el,
    swipedir,
    startX,
    startY,
    distX,
    distY,
    threshold = 100, //required min distance traveled to be considered swipe
    restraint = 100, // maximum distance allowed at the same time in perpendicular direction
    allowedTime = 300, // maximum time allowed to travel that distance
    elapsedTime,
    startTime,
    handleswipe = callback || function(swipedir){}
  
    touchsurface.addEventListener('touchstart', function(e){
        var touchobj = e.changedTouches[0]
        swipedir = 'none'
        dist = 0
        startX = touchobj.pageX
        startY = touchobj.pageY
        startTime = new Date().getTime() // record time when finger first makes contact with surface
        e.preventDefault()
    }, false)
  
    touchsurface.addEventListener('touchmove', function(e){
        e.preventDefault() // prevent scrolling when inside DIV
    }, false)
  
    touchsurface.addEventListener('touchend', function(e){
        var touchobj = e.changedTouches[0]
        distX = touchobj.pageX - startX // get horizontal dist traveled by finger while in contact with surface
        distY = touchobj.pageY - startY // get vertical dist traveled by finger while in contact with surface
        elapsedTime = new Date().getTime() - startTime // get time elapsed
        if (elapsedTime <= allowedTime){ // first condition for awipe met
            if (Math.abs(distX) >= threshold && Math.abs(distY) <= restraint){ // 2nd condition for horizontal swipe met
                swipedir = (distX < 0)? 'left' : 'right' // if dist traveled is negative, it indicates left swipe
            }
            else if (Math.abs(distY) >= threshold && Math.abs(distX) <= restraint){ // 2nd condition for vertical swipe met
                swipedir = (distY < 0)? 'up' : 'down' // if dist traveled is negative, it indicates up swipe
            }
        }
        handleswipe(swipedir)
        e.preventDefault()
    }, false)
}
	
	</script>
	
	
	<script>
	
	var viewModel;
	
function TablicaViewModel() {
    var self = this;
	
 self.podaci = [
        { Ime: "Matko", Prezime: "Galić", Kampanja: "Testna kampanja 12", Cijena: 3210, Datum: "29.01.2015", Kontakt: 1 },
        { Ime: "Ivan", Prezime: "Fanović", Kampanja: "RTD must go", Cijena: 10, Datum: "22.01.2017", Kontakt: 2 },
        { Ime: "Lucija", Prezime: "Klepić", Kampanja: "I tako nije tak", Cijena: 320, Datum: "10.01.2016", Kontakt: 3 }
    ];    

	self.tablica = {
		headers : ko.observableArray(["Ime", "Prezime", "Kampanja", "Cijena", "Datum", "Br. Kontakata", "Ucini kontakt"]),
		data: ko.observableArray(self.podaci),
		page: ko.observable(1), //tablica 1 sto je prikazano
		visibleColumn: ko.observable(0) // tablica 2 sto je vidljivo
	}

	// tablica 1
	self.nedirajtemikrugove = ko.computed(function(){
		var ret = [];
		
		for(var i= 0; i< self.tablica.data().length; i++){
			ret.push("&#9675");
		}
		ret[self.tablica.page()] = "&#9673";
		
		return ret.join("");
		
		});
		
	// tablica 2
	self.hidenOrNot = function(index){
	
	if(index >= self.tablica.visibleColumn() && index < self.tablica.visibleColumn()+3) return false;
	else return true;
	
	}
	
	// tablica 2
	self.nedirajtemikrugove2 = ko.computed(function(){
		var ret = [];
		
		for(var i= 0; i< 7; i++){
			ret.push("&#9675");
		}
		ret[self.tablica.visibleColumn()] = "&#9673";
		ret[self.tablica.visibleColumn()+1] = "&#9673";
		ret[self.tablica.visibleColumn()+2] = "&#9673";
		
		return ret.join("");
		
		});	
		
	
	// tablica 1
	var el = document.getElementById('malaLista');
	swipedetect(el, function(swipedir){
		//swipedir contains either "none", "left", "right", "top", or "down"
		if (swipedir =='left' && self.tablica.data().length-1 > self.tablica.page())
			self.tablica.page(self.tablica.page()+1);
		else if (swipedir =='right' && self.tablica.page() > 0)
			self.tablica.page(self.tablica.page()-1);
			
			//console.log(self.tablica.page());
	});
	
	
	// tablica 2
	var el = document.getElementById('table2');
	swipedetect(el, function(swipedir){
		//swipedir contains either "none", "left", "right", "top", or "down"
		if (swipedir =='left' && self.tablica.visibleColumn()+ 3 < 7)
			self.tablica.visibleColumn(self.tablica.visibleColumn()+1);
		else if (swipedir =='right' && self.tablica.visibleColumn() -1 => 0)
			self.tablica.visibleColumn(self.tablica.visibleColumn()-1);
			
			//console.log(self.tablica.page());
	});
	
   
}

viewModel = TablicaViewModel();

ko.applyBindings(viewModel);
	
	
	</script>
	
	
  </body>
</html>